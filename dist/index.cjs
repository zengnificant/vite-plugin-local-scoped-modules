(function(s,c){typeof exports=="object"&&typeof module<"u"?module.exports=c(require("@babel/core"),require("vite")):typeof define=="function"&&define.amd?define(["@babel/core","vite"],c):(s=typeof globalThis<"u"?globalThis:s||self,s.localScopedModules=c(s.core,s.vite))})(this,function(s,c){"use strict";const p={rootPrefix:"~",scopePrefix:"@",scopes:[],calleeNames:["require","import"]},f=(e={})=>{const t=()=>Object.assign(p,e);return{name:"vite:LocalScopeModules",resolveId(r,o){const l=t();if(o&&o.endsWith(".html"))return i(r);if(g(r,l)){const a=`require("${r}");`,{code:u}=s.transformSync(a,{filename:o,ast:!1,plugins:[["babel-plugin-local-scoped-modules",l]],sourceMaps:!1});let n=u.replace(/[\s\S]*?require\(["'](.*)['"]\);/,"$1");return i(n)}return null}}},i=e=>{if(e=c.normalizePath(e),e.startsWith("../"))e=e.replace(/\.\.\//g,""),e.startsWith("./")||(e="./"+e);else if(e.startsWith("./"))e=e.replace(/\.\.\//g,"");else return null;return e},h=(()=>{const e=/[|\\{}()[\]^$+*?.-]/g;return t=>{if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(e,"\\$&")}})();function g(e,{rootPrefix:t,scopePrefix:r,scopes:o}){let l=new RegExp(`^${h(r)}[-_0-9A-z/]+`);return e===t||e.startsWith(`${t}/`)&&e.split(t).length===2||l.test(e)&&e.split(r).length===2?o.map(n=>n.name).concat(t).some(n=>!!(e===n||e.startsWith(`${n}/`)&&e.split(n).length===2)):!1}return f});
